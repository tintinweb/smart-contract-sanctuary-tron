//SourceUnit: Presale.sol

pragma solidity ^0.5.0;

library SafeMath {
    function add(uint256 a, uint256 b) internal pure returns (uint256) {
        uint256 c = a + b;
        require(c >= a, "SafeMath: addition overflow");

        return c;
    }

    function sub(uint256 a, uint256 b) internal pure returns (uint256) {
        return sub(a, b, "SafeMath: subtraction overflow");
    }

    function sub(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        require(b <= a, errorMessage);
        uint256 c = a - b;

        return c;
    }

    function mul(uint256 a, uint256 b) internal pure returns (uint256) {
        if (a == 0) {
            return 0;
        }

        uint256 c = a * b;
        require(c / a == b, "SafeMath: multiplication overflow");

        return c;
    }

    function div(uint256 a, uint256 b) internal pure returns (uint256) {
        return div(a, b, "SafeMath: division by zero");
    }

    function div(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        // Solidity only automatically asserts when dividing by 0
        require(b > 0, errorMessage);
        uint256 c = a / b;
        // assert(a == b * c + a % b); // There is no case in which this doesn't hold

        return c;
    }

    function mod(uint256 a, uint256 b) internal pure returns (uint256) {
        return mod(a, b, "SafeMath: modulo by zero");
    }

    function mod(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        require(b != 0, errorMessage);
        return a % b;
    }
}

contract Context {
    constructor () internal { }

    function _msgSender() internal view returns (address payable) {
        return msg.sender;
    }

    function _msgData() internal view returns (bytes memory) {
        this; // silence state mutability warning without generating bytecode - see https://github.com/ethereum/solidity/issues/2691
        return msg.data;
    }
}

contract Ownable is Context {
    address private _owner;
    /**
     * @dev Initializes the contract setting the deployer as the initial owner.
     */
    constructor () internal {
        _owner = _msgSender();
    }

    /**
     * @dev Returns the address of the current owner.
     */
    function owner() public view returns (address) {
        return _owner;
    }

    function isOwner() public view returns (bool) {
        return _msgSender() == _owner;
    }

    modifier onlyOwner() {
        require(isOwner(), "Ownable: caller is not the owner");
        _;
    }
}

interface IERC20 {
    function totalSupply() external view returns (uint256);
    function balanceOf(address account) external view returns (uint256);
    function transfer(address recipient, uint256 amount) external returns (bool);
    function allowance(address owner, address spender) external view returns (uint256);
    function approve(address spender, uint256 amount) external returns (bool);
    function transferFrom(address sender, address recipient, uint256 amount) external returns (bool);
}

contract Presale is Ownable {
    using SafeMath for uint256;
    IERC20 public cir;
    IERC20 public usdt;
    uint public presaleTime = 1635588000;
    uint public startTime = 1635588000;
    uint public ratio;
    uint public totalSurplus = 500000 * (10 ** 8);
    uint constant public period = 7 days;

    mapping(address => uint) private userTotalAward;
    mapping(address => uint) private userHasAward;
    mapping(address => bool) public userSigned;

    string public constant RiskDisclaimer = "5269736b20446973636c61696d65723a0a43697263756c61746520697320616e206f6e6c696e65206c656e64696e6720696e666f726d6174696f6e206d61746368696e6720706c6174666f726d207574696c697a696e6720626c6f636b636861696e20746563686e6f6c6f67792e2054686520706c6174666f726d20697473656c6620686173206e6f206469726563742061636365737320746f2075736572206173736574732e205573657220617373657473206172652073746f72656420696e20736d61727420636f6e747261637473206f6e207468652054524f4e20626c6f636b636861696e2e2054686520706c6174666f726d206973206f6e6c7920617574686f72697a656420746f206465706c6f79206e657720636f6e74726163747320616e64206f6c6465722c206578697374696e6720636f6e7472616374732061726520696d6d757461626c652e2048656e63652c2074686520666f6c6c6f77696e67207269736b207761726e696e67732061726520646973636c6f7365643a0a0a312e20556e6b6e6f776e20546563686e6963616c20446566656374733a2020746865207365637572697479207269736b73206f662074686520706c6174666f726d20697473656c66206d6967687420726573756c7420696e206c6f7373206f66207072696e636970616c206173206120726573756c74206f6620756e6b6e6f776e20746563686e6963616c20646566656374732028696e636c7564696e672074686520706c6174666f726d20616e64207468652054524f4e206e6574776f726b292e0a322e20546f6b656e204d61726b657420507269636520566f6c6174696c6974793a202074686973206973206265796f6e642074686520636f6e74726f6c206f66207468652043697263756c61746520706c6174666f726d20616e642063616e206265206174747269627574656420746f20766172696f757320666163746f72732073756368206173206d61726b65742073656e74696d656e742c20676c6f62616c2063727970746f206d61726b657420636f6e646974696f6e732c206e756d626572206f6620746f6b656e20686f6c646572732c20616e6420746865206265686176696f72206f66206c61726765207768616c6520696e766573746f72732e205468657265206973206e6f2067756172616e746565206f6620746f6b656e2070726f6669746162696c697479206173206120726573756c74206f66206d696e696e67206163746976697469657320616e64206469726563742070757263686173652e0a332e20486967682044656d616e64204c6971756964697479207269736b3a2020616e7920746f6b656e20617373657473206465706f736974656420746f2043697263756c6174652070726f746f636f6c20636f756c6420626520656e746972656c7920626f72726f776564206279206f7468657220757365727320616e642063616e2062652074656d706f726172696c7920756e61626c6520746f2062652077697468647261776e20756e74696c206c697175696469747920696d70726f7665732066726f6d206569746865722066757274686572206465706f736974206f6620746f6b656e73206f722072657061796d656e74206f66206f75747374616e64696e67206c6f616e732e0a342e204d696e696e67204f7574707574204973737565733a2020746563686e6963616c20736f6c7574696f6e7320746f2070726f626c656d732c20706f74656e7469616c20627567732c206861636b65722061747461636b732c206574632e20636f756c64206c65616420746f2070726f626c656d7320737563682061732064656c617920696e20746f6b656e2064656c69766572792c2064697363726570616e6369657320696e207468652063616c63756c61746564206d696e656420616d6f756e742c206f7220746f6b656e73206e6f74206172726976696e672e0a352e204f7468657220756e666f72657365656e207365637572697479207269736b732e";

    string public constant Terms = "5465726d73206f6620536572766963650a57656c636f6d6520746f2068747470733a2f2f6170702e43697263756c6174652e66696e616e63652c206120776562736974652d686f73746564207573657220696e74657266616365202874686520e2809c496e74657266616365e2809d206f7220e2809c417070e2809d292070726f76696465642062792043697263756c617465204c6162732c20496e632e2028e2809c7765e2809d2c20e2809c6f7572e2809d2c206f7220e2809c7573e2809d292e2054686520496e746572666163652070726f76696465732061636365737320746f206120646563656e7472616c697a65642070726f746f636f6c206f6e207468652054524f4e20626c6f636b636861696e207468617420616c6c6f777320737570706c6965727320616e6420626f72726f77657273206f66206365727461696e206469676974616c2061737365747320746f20706172746963697061746520696e206175746f6e6f6d6f757320696e7465726573742072617465206d61726b657473202874686520e2809c50726f746f636f6ce2809d292e0a54686973205465726d73206f6620536572766963652041677265656d656e74202874686520e2809c41677265656d656e74e2809d29206578706c61696e7320746865207465726d7320616e6420636f6e646974696f6e7320627920776869636820796f75206d61792061636365737320616e64207573652074686520496e746572666163652e596f75206d757374207265616420746869732041677265656d656e74206361726566756c6c792ec2a0427920616363657373696e67206f72207573696e672074686520496e746572666163652c20796f75207369676e696679207468617420796f75206861766520726561642c20756e6465727374616e642c20616e6420616772656520746f20626520626f756e6420627920746869732041677265656d656e7420696e2069747320656e7469726574792e20496620796f7520646f206e6f742061677265652c20796f7520617265206e6f7420617574686f72697a656420746f20616363657373206f72207573652074686520496e746572666163652e0a312e204d6f64696669636174696f6e206f6620746869732041677265656d656e740a57652072657365727665207468652072696768742c20696e206f757220736f6c652064697363726574696f6e2c20746f206d6f6469667920746869732041677265656d656e742066726f6d2074696d6520746f2074696d652e204966207765206d616b6520616e79206d6f64696669636174696f6e732c2077652077696c6c206e6f7469667920796f75206279207570646174696e672074686520646174652061742074686520746f70206f66207468652041677265656d656e7420616e64206279206d61696e7461696e696e6720612063757272656e742076657273696f6e206f66207468652041677265656d656e742061742068747470733a2f2f6170702e43697263756c6174652e66696e616e63652f7465726d732e20416c6c206d6f64696669636174696f6e732077696c6c20626520656666656374697665207768656e20746865792061726520706f737465642c20616e6420796f757220636f6e74696e75656420757365206f662074686520496e746572666163652077696c6c20736572766520617320636f6e6669726d6174696f6e206f6620796f757220616363657074616e6365206f662074686f7365206d6f64696669636174696f6e732e20496620796f7520646f206e6f74206167726565207769746820616e79206d6f64696669636174696f6e7320746f20746869732041677265656d656e742c20796f75206d75737420696d6d6564696174656c792073746f7020616363657373696e6720616e64207573696e672074686520496e746572666163652e0a322e20456c69676962696c6974790a546f20616363657373206f72207573652074686520496e746572666163652c20796f75206d7573742062652061626c6520746f20666f726d2061206c6567616c6c792062696e64696e6720636f6e747261637420776974682075732e204163636f7264696e676c792c20796f7520726570726573656e74207468617420796f7520617265206174206c6561737420656967687465656e207965617273206f6c6420616e642068617665207468652066756c6c2072696768742c20706f7765722c20616e6420617574686f7269747920746f20656e74657220696e746f20616e6420636f6d706c79207769746820746865207465726d7320616e6420636f6e646974696f6e73206f6620746869732041677265656d656e74206f6e20626568616c66206f6620796f757273656c6620616e6420616e7920636f6d70616e79206f72206c6567616c20656e7469747920666f7220776869636820796f75206d617920616363657373206f72207573652074686520496e746572666163652e20596f75206675727468657220726570726573656e74207468617420796f7520617265206e6f74206120636974697a656e2c207265736964656e742c206f72206d656d626572206f6620616e79206a7572697364696374696f6e206f722067726f75702074686174206973207375626a65637420746f2065636f6e6f6d69632073616e6374696f6e732062792074686520556e697465642053746174657320616e64204368696e612c206f7220776865726520796f757220757365206f662074686520496e7465726661636520776f756c6420626520696c6c6567616c206f72206f74686572776973652076696f6c61746520616e79206170706c696361626c65206c61772e20596f75206675727468657220726570726573656e74207468617420796f75722061636365737320616e6420757365206f662074686520496e746572666163652077696c6c2066756c6c7920636f6d706c79207769746820616c6c206170706c696361626c65206c61777320616e6420726567756c6174696f6e732c20616e64207468617420796f752077696c6c206e6f7420616363657373206f72207573652074686520496e7465726661636520746f20636f6e647563742c2070726f6d6f74652c206f72206f746865727769736520666163696c697461746520616e7920696c6c6567616c2061637469766974792e0a332e2050726f7072696574617279205269676874730a5765206f776e20616c6c20696e74656c6c65637475616c2070726f706572747920616e64206f746865722072696768747320696e2074686520496e7465726661636520616e642069747320636f6e74656e74732c20696e636c7564696e672028627574206e6f74206c696d6974656420746f2920736f6674776172652c20746578742c20696d616765732c2074726164656d61726b732c2073657276696365206d61726b732c20636f70797269676874732c20706174656e74732c20616e642064657369676e732e20556e6c65737320657870726573736c7920617574686f72697a65642062792075732c20796f75206d6179206e6f7420636f70792c206d6f646966792c2061646170742c2072656e742c206c6963656e73652c2073656c6c2c207075626c6973682c20646973747269627574652c206f72206f7468657277697365207065726d697420616e7920746869726420706172747920746f20616363657373206f72207573652074686520496e74657266616365206f7220616e79206f662069747320636f6e74656e74732e2050726f7669646564207468617420796f752061726520656c696769626c652c20796f752061726520686572656279206772616e74656420612073696e676c652c20706572736f6e616c2c206c696d69746564206c6963656e736520746f2061636365737320616e64207573652074686520496e746572666163652e2054686973206c6963656e7365206973206e6f6e2d6578636c75736976652c206e6f6e2d7472616e7366657261626c652c20616e6420667265656c79207265766f6361626c6520627920757320617420616e792074696d6520776974686f7574206e6f74696365206f722063617573652e20557365206f662074686520496e74657266616365206f722069747320636f6e74656e747320666f7220616e7920707572706f7365206e6f7420657870726573736c79207065726d697474656420627920746869732041677265656d656e74206973207374726963746c792070726f686962697465642e20556e6c696b652074686520496e746572666163652c207468652050726f746f636f6c20697320636f6d70726973656420656e746972656c79206f66206f70656e2d736f7572636520736f6674776172652072756e6e696e67206f6e20746865207075626c69632054524f4e20626c6f636b636861696e20616e64206973206e6f74206f75722070726f70726965746172792070726f70657274792e0a342e20507269766163790a576520636172652061626f757420796f757220707269766163792e20416c74686f7567682077652077696c6c20636f6d706c79207769746820616c6c2076616c696420737562706f656e612072657175657374732c2077652077696c6c206361726566756c6c7920636f6e73696465722065616368207265717565737420746f20656e73757265207468617420697420636f6d706f7274732077697468207468652073706972697420616e64206c6574746572206f6620746865206c61772c20616e642077652077696c6c206e6f7420686573697461746520746f206368616c6c656e676520696e76616c69642c206f76657262726f61642c206f7220756e636f6e737469747574696f6e616c20726571756573747320617320617070726f7072696174652e2057652075736520636f6d6d65726369616c6c7920726561736f6e61626c65207361666567756172647320746f2070726573657276652074686520696e7465677269747920616e64207365637572697479206f6620796f757220706572736f6e616c6c79206964656e7469666961626c6520696e666f726d6174696f6e2028e2809c504949e2809d2920616e642061676772656761746520646174612e20486f77657665722c2077652063616e6e6f742067756172616e746565207468617420756e617574686f72697a656420746869726420706172746965732077696c6c206e657665722062652061626c6520746f206f627461696e206f722075736520796f757220504949206f7220616767726567617465206461746120666f7220696d70726f70657220707572706f7365732e20596f752061636b6e6f776c65646765207468617420796f752070726f7669646520796f75722050494920616e6420616767726567617465206461746120617420796f7572206f776e207269736b2e20427920616363657373696e6720616e64207573696e672074686520496e746572666163652c20796f7520756e6465727374616e6420616e6420636f6e73656e7420746f206f757220636f6c6c656374696f6e2c207573652c20616e6420646973636c6f73757265206f6620796f75722050494920616e642061676772656761746520646174612e0a352e2050726f686962697465642041637469766974790a596f75206167726565206e6f7420746f20656e6761676520696e2c206f7220617474656d707420746f20656e6761676520696e2c20616e79206f662074686520666f6c6c6f77696e672063617465676f72696573206f662070726f6869626974656420616374697669747920696e2072656c6174696f6e20746f20796f75722061636365737320616e6420757365206f662074686520496e746572666163653a0a496e74656c6c65637475616c2050726f706572747920496e6672696e67656d656e742ec2a04163746976697479207468617420696e6672696e676573206f6e206f722076696f6c6174657320616e7920636f707972696768742c2074726164656d61726b2c2073657276696365206d61726b2c20706174656e742c207269676874206f66207075626c69636974792c207269676874206f6620707269766163792c206f72206f746865722070726f7072696574617279206f7220696e74656c6c65637475616c2070726f70657274792072696768747320756e64657220746865206c61772e0a437962657261747461636b2ec2a041637469766974792074686174207365656b7320746f20696e746572666572652077697468206f7220636f6d70726f6d6973652074686520696e746567726974792c2073656375726974792c206f722070726f7065722066756e6374696f6e696e67206f6620616e7920636f6d70757465722c207365727665722c206e6574776f726b2c20706572736f6e616c206465766963652c206f72206f7468657220696e666f726d6174696f6e20746563686e6f6c6f67792073797374656d2c20696e636c7564696e672028627574206e6f74206c696d6974656420746f2920746865206465706c6f796d656e74206f66207669727573657320616e642064656e69616c206f6620736572766963652061747461636b732e0a467261756420616e64204d6973726570726573656e746174696f6e2ec2a041637469766974792074686174207365656b7320746f2064656672617564207573206f7220616e79206f7468657220706572736f6e206f7220656e746974792c20696e636c7564696e672028627574206e6f74206c696d6974656420746f292070726f766964696e6720616e792066616c73652c20696e61636375726174652c206f72206d69736c656164696e6720696e666f726d6174696f6e20696e206f7264657220746f20756e6c617766756c6c79206f627461696e207468652070726f7065727479206f6620616e6f746865722e0a4d61726b6574204d616e6970756c6174696f6e2ec2a0416374697669747920746861742076696f6c6174657320616e79206170706c696361626c65206c61772c2072756c652c206f7220726567756c6174696f6e20636f6e6365726e696e672074686520696e74656772697479206f662074726164696e67206d61726b6574732c20696e636c7564696e672028627574206e6f74206c696d6974656420746f2920746865206d616e6970756c6174697665207461637469637320636f6d6d6f6e6c79206b6e6f776e2061732073706f6f66696e6720616e6420776173682074726164696e672e0a416e79204f7468657220556e6c617766756c20436f6e647563742ec2a0416374697669747920746861742076696f6c6174657320616e79206170706c696361626c65206c61772c2072756c652c206f7220726567756c6174696f6e206f662074686520556e6974656420537461746573206f7220616e6f746865722072656c6576616e74206a7572697364696374696f6e2c20696e636c7564696e672028627574206e6f74206c696d6974656420746f2920746865207265737472696374696f6e7320616e6420726567756c61746f727920726571756972656d656e747320696d706f73656420627920552e532e206c61772e0a362e204e6f2050726f66657373696f6e616c204164766963650a416c6c20696e666f726d6174696f6e2070726f76696465642062792074686520496e7465726661636520697320666f7220696e666f726d6174696f6e616c20707572706f736573206f6e6c7920616e642073686f756c64206e6f7420626520636f6e7374727565642061732070726f66657373696f6e616c206164766963652e20596f752073686f756c64206e6f742074616b652c206f72207265667261696e2066726f6d2074616b696e672c20616e7920616374696f6e206261736564206f6e20616e7920696e666f726d6174696f6e20636f6e7461696e656420696e2074686520496e746572666163652e204265666f726520796f75206d616b6520616e792066696e616e6369616c2c206c6567616c2c206f72206f74686572206465636973696f6e7320696e766f6c76696e672074686520496e746572666163652c20796f752073686f756c64207365656b20696e646570656e64656e742070726f66657373696f6e616c206164766963652066726f6d20616e20696e646976696475616c2077686f206973206c6963656e73656420616e64207175616c696669656420696e20746865206172656120666f7220776869636820737563682061647669636520776f756c6420626520617070726f7072696174652e0a372e204e6f2057617272616e746965730a54686520496e746572666163652069732070726f7669646564206f6e20616e20e2809c4153204953e2809d20616e6420e2809c415320415641494c41424c45e2809d2062617369732e20546f207468652066756c6c65737420657874656e74207065726d6974746564206279206c61772c20776520646973636c61696d20616e7920726570726573656e746174696f6e7320616e642077617272616e74696573206f6620616e79206b696e642c207768657468657220657870726573732c20696d706c6965642c206f72207374617475746f72792c20696e636c7564696e672028627574206e6f74206c696d6974656420746f29207468652077617272616e74696573206f66206d65726368616e746162696c69747920616e64206669746e65737320666f72206120706172746963756c617220707572706f73652ec2a0596f752061636b6e6f776c6564676520616e64206167726565207468617420796f757220757365206f662074686520496e7465726661636520697320617420796f7572206f776e207269736b2ec2a0576520646f206e6f7420726570726573656e74206f722077617272616e7420746861742061636365737320746f2074686520496e746572666163652077696c6c20626520636f6e74696e756f75732c20756e696e7465727275707465642c2074696d656c792c206f72207365637572653b20746861742074686520696e666f726d6174696f6e20636f6e7461696e656420696e2074686520496e746572666163652077696c6c2062652061636375726174652c2072656c6961626c652c20636f6d706c6574652c206f722063757272656e743b206f7220746861742074686520496e746572666163652077696c6c20626520667265652066726f6d206572726f72732c20646566656374732c20766972757365732c206f72206f74686572206861726d66756c20656c656d656e74732e204e6f206164766963652c20696e666f726d6174696f6e2c206f722073746174656d656e742074686174207765206d616b652073686f756c642062652074726561746564206173206372656174696e6720616e792077617272616e747920636f6e6365726e696e672074686520496e746572666163652e20576520646f206e6f7420656e646f7273652c2067756172616e7465652c206f7220617373756d6520726573706f6e736962696c69747920666f7220616e79206164766572746973656d656e74732c206f66666572732c206f722073746174656d656e7473206d616465206279207468697264207061727469657320636f6e6365726e696e672074686520496e746572666163652e0a382e204e6f20466964756369617279204475746965730a546869732041677265656d656e74206973206e6f7420696e74656e64656420746f2c20616e6420646f6573206e6f742c20637265617465206f7220696d706f736520616e792066696475636961727920647574696573206f6e2075732e20546f207468652066756c6c65737420657874656e74207065726d6974746564206279206c61772c20796f752061636b6e6f776c6564676520616e642061677265652074686174207765206f7765206e6f2066696475636961727920647574696573206f72206c696162696c697469657320746f20796f75206f7220616e79206f746865722070617274792c20616e64207468617420746f2074686520657874656e7420616e79207375636820647574696573206f72206c696162696c6974696573206d6179206578697374206174206c6177206f7220696e206571756974792c2074686f73652064757469657320616e64206c696162696c697469657320617265206865726562792069727265766f6361626c7920646973636c61696d65642c207761697665642c20616e6420656c696d696e617465642e20596f752066757274686572206167726565207468617420746865206f6e6c792064757469657320616e64206f626c69676174696f6e732074686174207765206f776520796f75206172652074686f736520736574206f757420657870726573736c7920696e20746869732041677265656d656e742e0a392e20436f6d706c69616e6365204f626c69676174696f6e730a54686520496e74657266616365206973206f706572617465642066726f6d20666163696c69746965732077697468696e2074686520556e69746564205374617465732e2054686520496e74657266616365206d6179206e6f7420626520617661696c61626c65206f7220617070726f70726961746520666f722075736520696e206f74686572206a7572697364696374696f6e732e20427920616363657373696e67206f72207573696e672074686520496e746572666163652c20796f75206167726565207468617420796f752061726520736f6c656c7920616e6420656e746972656c7920726573706f6e7369626c6520666f7220636f6d706c69616e6365207769746820616c6c206c61777320616e6420726567756c6174696f6e732074686174206d6179206170706c7920746f20796f752e20596f75206d6179206e6f74207573652074686520496e7465726661636520696620796f7520617265206120636974697a656e2c207265736964656e742c206f72206d656d626572206f6620616e79206a7572697364696374696f6e206f722067726f75702074686174206973207375626a65637420746f2065636f6e6f6d69632073616e6374696f6e732062792074686520556e697465642053746174657320616e64204368696e612c206f7220696620796f757220757365206f662074686520496e7465726661636520776f756c6420626520696c6c6567616c206f72206f74686572776973652076696f6c61746520616e79206170706c696361626c65206c61772e2054686520496e7465726661636520616e6420616c6c206f662069747320636f6e74656e74732061726520736f6c656c7920646972656374656420746f20696e646976696475616c732c20636f6d70616e6965732c20616e64206f7468657220656e746974696573206c6f63617465642077697468696e2074686520556e697465642053746174657320616e64204368696e612e0a31302e20417373756d7074696f6e206f66205269736b0a427920616363657373696e6720616e64207573696e672074686520496e746572666163652c20796f7520726570726573656e74207468617420796f7520756e6465727374616e642074686520696e686572656e74207269736b73206173736f6369617465642077697468207573696e672063727970746f6772617068696320616e6420626c6f636b636861696e2d62617365642073797374656d732c20616e64207468617420796f752068617665206120776f726b696e67206b6e6f776c65646765206f662074686520757361676520616e6420696e747269636163696573206f66206469676974616c20617373657473207375636820617320626974636f696e2028425443292c205452582854524f4e292c20616e64206f74686572206469676974616c20746f6b656e7320737563682061732074686f736520666f6c6c6f77696e67207468652054524f4e20546f6b656e205374616e6461726420285452432d3230292e20596f75206675727468657220756e6465727374616e64207468617420746865206d61726b65747320666f72207468657365206469676974616c206173736574732061726520686967686c7920766f6c6174696c652064756520746f20666163746f727320696e636c7564696e672028627574206e6f74206c696d6974656420746f292061646f7074696f6e2c2073706563756c6174696f6e2c20746563686e6f6c6f67792c2073656375726974792c20616e6420726567756c6174696f6e2e20596f752061636b6e6f776c6564676520746861742074686520636f737420616e64207370656564206f66207472616e73616374696e6720776974682063727970746f6772617068696320616e6420626c6f636b636861696e2d62617365642073797374656d7320737563682061732054524f4e20617265207661726961626c6520616e64206d617920696e637265617365206472616d61746963616c6c7920617420616e792074696d652e20596f7520667572746865722061636b6e6f776c6564676520746865207269736b207468617420796f7572206469676974616c20617373657473206d6179206c6f736520736f6d65206f7220616c6c206f662074686569722076616c7565207768696c6520746865792061726520737570706c69656420746f207468652050726f746f636f6c2e20496620796f7520626f72726f77206469676974616c206173736574732066726f6d207468652050726f746f636f6c2c20796f752077696c6c206861766520746f20737570706c79206469676974616c20617373657473206f6620796f7572206f776e20617320636f6c6c61746572616c2e20496620796f757220636f6c6c61746572616c206465636c696e657320696e2076616c756520737563682074686174206974206973206e6f206c6f6e6765722073756666696369656e7420746f207365637572652074686520616d6f756e74207468617420796f7520626f72726f7765642c206f7468657273206d617920696e7465726163742077697468207468652050726f746f636f6c20746f207365697a6520796f757220636f6c6c61746572616c20696e2061206c69717569646174696f6e206576656e742e20596f7520667572746865722061636b6e6f776c65646765207468617420776520617265206e6f7420726573706f6e7369626c6520666f7220616e79206f66207468657365207661726961626c6573206f72207269736b732c20646f206e6f74206f776e206f7220636f6e74726f6c207468652050726f746f636f6c2c20616e642063616e6e6f742062652068656c64206c6961626c6520666f7220616e7920726573756c74696e67206c6f73736573207468617420796f7520657870657269656e6365207768696c6520616363657373696e67206f72207573696e672074686520496e746572666163652ec2a04163636f7264696e676c792c20796f7520756e6465727374616e6420616e6420616772656520746f20617373756d652066756c6c20726573706f6e736962696c69747920666f7220616c6c206f6620746865207269736b73206f6620616363657373696e6720616e64207573696e672074686520496e7465726661636520616e6420696e746572616374696e672077697468207468652050726f746f636f6c2e0a31312e2054686972642d5061727479205265736f757263657320616e642050726f6d6f74696f6e730a54686520496e74657266616365206d617920636f6e7461696e207265666572656e636573206f72206c696e6b7320746f2074686972642d7061727479207265736f75726365732c20696e636c7564696e672028627574206e6f74206c696d6974656420746f2920696e666f726d6174696f6e2c206d6174657269616c732c2070726f64756374732c206f722073657276696365732c207468617420776520646f206e6f74206f776e206f7220636f6e74726f6c2e20496e206164646974696f6e2c2074686972642070617274696573206d6179206f666665722070726f6d6f74696f6e732072656c6174656420746f20796f75722061636365737320616e6420757365206f662074686520496e746572666163652e20576520646f206e6f7420656e646f727365206f7220617373756d6520616e7920726573706f6e736962696c69747920666f7220616e792073756368207265736f7572636573206f722070726f6d6f74696f6e732e20496620796f752061636365737320616e792073756368207265736f7572636573206f7220706172746963697061746520696e20616e7920737563682070726f6d6f74696f6e732c20796f7520646f20736f20617420796f7572206f776e207269736b2c20616e6420796f7520756e6465727374616e64207468617420746869732041677265656d656e7420646f6573206e6f74206170706c7920746f20796f7572206465616c696e6773206f722072656c6174696f6e7368697073207769746820616e7920746869726420706172746965732e20596f7520657870726573736c792072656c69657665207573206f6620616e7920616e6420616c6c206c696162696c6974792061726973696e672066726f6d20796f757220757365206f6620616e792073756368207265736f7572636573206f722070617274696369706174696f6e20696e20616e7920737563682070726f6d6f74696f6e732e0a31322e2052656c65617365206f6620436c61696d730a596f7520657870726573736c79206167726565207468617420796f7520617373756d6520616c6c207269736b7320696e20636f6e6e656374696f6e207769746820796f75722061636365737320616e6420757365206f662074686520496e7465726661636520616e6420796f757220696e746572616374696f6e2077697468207468652050726f746f636f6c2e20596f75206675727468657220657870726573736c7920776169766520616e642072656c656173652075732066726f6d20616e7920616e6420616c6c206c696162696c6974792c20636c61696d732c20636175736573206f6620616374696f6e2c206f722064616d616765732061726973696e672066726f6d206f7220696e20616e79207761792072656c6174696e6720746f20796f757220757365206f662074686520496e7465726661636520616e6420796f757220696e746572616374696f6e2077697468207468652050726f746f636f6c2e20496620796f752061726520612043616c69666f726e6961207265736964656e742c20796f75207761697665207468652062656e656669747320616e642070726f74656374696f6e73206f662043616c69666f726e696120436976696c20436f646520c2a720313534322c2077686963682070726f76696465733a20e2809c5b615d2067656e6572616c2072656c6561736520646f6573206e6f7420657874656e6420746f20636c61696d73207468617420746865206372656469746f72206f722072656c656173696e6720706172747920646f6573206e6f74206b6e6f77206f72207375737065637420746f20657869737420696e20686973206f7220686572206661766f72206174207468652074696d65206f6620657865637574696e67207468652072656c6561736520616e6420746861742c206966206b6e6f776e2062792068696d206f72206865722c20776f756c642068617665206d6174657269616c6c7920616666656374656420686973206f722068657220736574746c656d656e7420776974682074686520646562746f72206f722072656c65617365642070617274792ee2809d0a31332e20496e64656d6e6974790a596f7520616772656520746f20686f6c64206861726d6c6573732c2072656c656173652c20646566656e642c20616e6420696e64656d6e69667920757320616e64206f7572206f666669636572732c206469726563746f72732c20656d706c6f796565732c20636f6e74726163746f72732c206167656e74732c20616666696c69617465732c20616e64207375627369646961726965732066726f6d20616e6420616761696e737420616c6c20636c61696d732c2064616d616765732c206f626c69676174696f6e732c206c6f737365732c206c696162696c69746965732c20636f7374732c20616e6420657870656e7365732061726973696e672066726f6d3a2028612920796f75722061636365737320616e6420757365206f662074686520496e746572666163653b2028622920796f75722076696f6c6174696f6e206f6620616e79207465726d206f7220636f6e646974696f6e206f6620746869732041677265656d656e742c20746865207269676874206f6620616e792074686972642070617274792c206f7220616e79206f74686572206170706c696361626c65206c61772c2072756c652c206f7220726567756c6174696f6e3b20616e642028632920616e79206f74686572207061727479e28099732061636365737320616e6420757365206f662074686520496e74657266616365207769746820796f757220617373697374616e6365206f72207573696e6720616e7920646576696365206f72206163636f756e74207468617420796f75206f776e206f7220636f6e74726f6c2e0a31342e204c696d69746174696f6e206f66204c696162696c6974790a556e646572206e6f2063697263756d7374616e636573207368616c6c207765206f7220616e79206f66206f7572206f666669636572732c206469726563746f72732c20656d706c6f796565732c20636f6e74726163746f72732c206167656e74732c20616666696c69617465732c206f7220737562736964696172696573206265206c6961626c6520746f20796f7520666f7220616e7920696e6469726563742c2070756e69746976652c20696e636964656e74616c2c207370656369616c2c20636f6e73657175656e7469616c2c206f72206578656d706c6172792064616d616765732c20696e636c7564696e672028627574206e6f74206c696d6974656420746f292064616d6167657320666f72206c6f7373206f662070726f666974732c20676f6f6477696c6c2c207573652c20646174612c206f72206f7468657220696e74616e6769626c652070726f70657274792c2061726973696e67206f7574206f66206f722072656c6174696e6720746f20616e7920616363657373206f7220757365206f662074686520496e746572666163652c206e6f722077696c6c20776520626520726573706f6e7369626c6520666f7220616e792064616d6167652c206c6f73732c206f7220696e6a75727920726573756c74696e672066726f6d206861636b696e672c2074616d706572696e672c206f72206f7468657220756e617574686f72697a656420616363657373206f7220757365206f662074686520496e74657266616365206f722074686520696e666f726d6174696f6e20636f6e7461696e65642077697468696e2069742e20576520617373756d65206e6f206c696162696c697479206f7220726573706f6e736962696c69747920666f7220616e793a20286129206572726f72732c206d697374616b65732c206f7220696e61636375726163696573206f6620636f6e74656e743b2028622920706572736f6e616c20696e6a757279206f722070726f70657274792064616d6167652c206f6620616e79206e61747572652077686174736f657665722c20726573756c74696e672066726f6d20616e7920616363657373206f7220757365206f662074686520496e746572666163653b2028632920756e617574686f72697a656420616363657373206f7220757365206f6620616e792073656375726520736572766572206f7220646174616261736520696e206f757220636f6e74726f6c2c206f722074686520757365206f6620616e7920696e666f726d6174696f6e206f7220646174612073746f726564207468657265696e3b2028642920696e74657272757074696f6e206f7220636573736174696f6e206f662066756e6374696f6e2072656c6174656420746f2074686520496e746572666163653b2028652920627567732c20766972757365732c2074726f6a616e20686f727365732c206f7220746865206c696b652074686174206d6179206265207472616e736d697474656420746f206f72207468726f7567682074686520496e746572666163653b20286629206572726f7273206f72206f6d697373696f6e7320696e2c206f72206c6f7373206f722064616d61676520696e637572726564206173206120726573756c74206f662074686520757365206f662c20616e7920636f6e74656e74206d61646520617661696c61626c65207468726f7567682074686520496e746572666163653b20616e64202867292074686520646566616d61746f72792c206f6666656e736976652c206f7220696c6c6567616c20636f6e64756374206f6620616e792074686972642070617274792e20556e646572206e6f2063697263756d7374616e636573207368616c6c207765206f7220616e79206f66206f7572206f666669636572732c206469726563746f72732c20656d706c6f796565732c20636f6e74726163746f72732c206167656e74732c20616666696c69617465732c206f7220737562736964696172696573206265206c6961626c6520746f20796f7520666f7220616e7920636c61696d732c2070726f63656564696e67732c206c696162696c69746965732c206f626c69676174696f6e732c2064616d616765732c206c6f737365732c206f7220636f73747320696e20616e20616d6f756e7420657863656564696e672074686520616d6f756e7420796f75207061696420746f20757320696e2065786368616e676520666f722061636365737320746f20616e6420757365206f662074686520496e746572666163652c206f7220243130302e30302c2077686963686576657220697320677265617465722e2054686973206c696d69746174696f6e206f66206c696162696c697479206170706c696573207265676172646c657373206f6620776865746865722074686520616c6c65676564206c696162696c697479206973206261736564206f6e20636f6e74726163742c20746f72742c206e65676c6967656e63652c20737472696374206c696162696c6974792c206f7220616e79206f746865722062617369732c20616e64206576656e2069662077652068617665206265656e2061647669736564206f662074686520706f73736962696c697479206f662073756368206c696162696c6974792e20536f6d65206a7572697364696374696f6e7320646f206e6f7420616c6c6f7720746865206578636c7573696f6e206f66206365727461696e2077617272616e74696573206f7220746865206c696d69746174696f6e206f72206578636c7573696f6e206f66206365727461696e206c696162696c697469657320616e642064616d616765732e204163636f7264696e676c792c20736f6d65206f662074686520646973636c61696d65727320616e64206c696d69746174696f6e732073657420666f72746820696e20746869732041677265656d656e74206d6179206e6f74206170706c7920746f20796f752e2054686973206c696d69746174696f6e206f66206c696162696c697479207368616c6c206170706c7920746f207468652066756c6c65737420657874656e74207065726d6974746564206279206c61772e0a31352e2044697370757465205265736f6c7574696f6e0a57652077696c6c20757365206f75722062657374206566666f72747320746f207265736f6c766520616e7920706f74656e7469616c206469737075746573207468726f75676820696e666f726d616c2c20676f6f64206661697468206e65676f74696174696f6e732e204966206120706f74656e7469616c2064697370757465206172697365732c20796f75206d75737420636f6e746163742075732062792073656e64696e6720616e20656d61696c20746f2043697263756c61746566696e40676d61696c2e636f6d20736f20746861742077652063616e20617474656d707420746f207265736f6c766520697420776974686f7574207265736f7274696e6720746f20666f726d616c2064697370757465207265736f6c7574696f6e2e204966207765206172656ee28099742061626c6520746f20726561636820616e20696e666f726d616c207265736f6c7574696f6e2077697468696e2073697874792064617973206f6620796f757220656d61696c2c207468656e20796f7520616e6420776520626f746820616772656520746f207265736f6c76652074686520706f74656e7469616c2064697370757465206163636f7264696e6720746f207468652070726f636573732073657420666f7274682062656c6f772e0a416e7920636c61696d206f7220636f6e74726f76657273792061726973696e67206f7574206f66206f722072656c6174696e6720746f2074686520496e746572666163652c20746869732041677265656d656e742c206f7220616e79206f746865722061637473206f72206f6d697373696f6e7320666f7220776869636820796f75206d617920636f6e74656e64207468617420776520617265206c6961626c652c20696e636c7564696e672028627574206e6f74206c696d6974656420746f2920616e7920636c61696d206f7220636f6e74726f766572737920617320746f206172626974726162696c6974792028e2809c44697370757465e2809d292c207368616c6c2062652066696e616c6c7920616e64206578636c75736976656c7920736574746c6564206279206172626974726174696f6e20756e64657220746865204a414d53204f7074696f6e616c20457870656469746564204172626974726174696f6e2050726f636564757265732ec2a0596f7520756e6465727374616e64207468617420796f752061726520726571756972656420746f207265736f6c766520616c6c2044697370757465732062792062696e64696e67206172626974726174696f6e2ec2a0546865206172626974726174696f6e207368616c6c2062652068656c64206f6e206120636f6e666964656e7469616c206261736973206265666f726520612073696e676c652061726269747261746f722c2077686f207368616c6c2062652073656c6563746564207075727375616e7420746f204a414d532072756c65732e20546865206172626974726174696f6e2077696c6c2062652068656c6420696e2053616e204672616e636973636f2c2043616c69666f726e69612c20756e6c65737320796f7520616e6420776520626f746820616772656520746f20686f6c6420697420656c736577686572652e20556e6c657373207765206167726565206f74686572776973652c207468652061726269747261746f72206d6179206e6f7420636f6e736f6c696461746520796f757220636c61696d7320776974682074686f7365206f6620616e79206f746865722070617274792e20416e79206a7564676d656e74206f6e207468652061776172642072656e6465726564206279207468652061726269747261746f72206d617920626520656e746572656420696e20616e7920636f757274206f6620636f6d706574656e74206a7572697364696374696f6e2e0a31362e20436c61737320416374696f6e20616e64204a75727920547269616c205761697665720a596f75206d757374206272696e6720616e7920616e6420616c6c20446973707574657320616761696e737420757320696e20796f757220696e646976696475616c20636170616369747920616e64206e6f74206173206120706c61696e7469666620696e206f72206d656d626572206f6620616e7920707572706f7274656420636c61737320616374696f6e2c20636f6c6c65637469766520616374696f6e2c2070726976617465206174746f726e65792067656e6572616c20616374696f6e2c206f72206f7468657220726570726573656e7461746976652070726f63656564696e672e20546869732070726f766973696f6e206170706c69657320746f20636c617373206172626974726174696f6e2e20596f7520616e6420776520626f746820616772656520746f2077616976652074686520726967687420746f2064656d616e64206120747269616c206279206a7572792e";

    event PresaleLog(address indexed user, uint256 amount);
    event SignLog(address indexed user, bytes32 signature, uint256 time);

    modifier hasSigned() {
        require(userSigned[msg.sender] == true, "user has not signed the terms");
        _;
    }


    function initContract(address _token, address _usdt, uint _time, uint _radio) external onlyOwner {
        cir = IERC20(_token);
        usdt = IERC20(_usdt);
        presaleTime = _time;
        ratio = _radio;
    }

    function sign() external {
        bytes32 signature = keccak256(abi.encode(Terms, RiskDisclaimer, address(this)));
        userSigned[msg.sender] = true;
        emit SignLog(msg.sender, signature, now);
    }

    function setStartTime(uint _time) external onlyOwner {
        startTime = _time;
    }

    function() payable external {

    }

    function purchase(uint _amount) external hasSigned {
        require(_amount > 0, "Cannot sale 0");
        require(now >= presaleTime, "presale has not starttttttt");
        uint amount =  _amount * ratio;
        require(totalSurplus >= amount, "no enougn cir");

        usdt.transferFrom(msg.sender, owner(), _amount);
        userTotalAward[msg.sender] = userTotalAward[msg.sender].add(amount);
        totalSurplus = totalSurplus.sub(amount);
        emit PresaleLog(msg.sender, amount);
    }

    function award() external {
        require(now >= startTime);
        uint amount = now.sub(startTime).div(period).add(1);
        uint canWithdraw_amount = 0;
        if (amount == 1) {
            canWithdraw_amount = userTotalAward[msg.sender].div(10).sub(userHasAward[msg.sender]);
        }
        if (amount == 2) {
            canWithdraw_amount = userTotalAward[msg.sender].mul(3).div(10).sub(userHasAward[msg.sender]);
        }
        if (amount == 3) {
            canWithdraw_amount = userTotalAward[msg.sender].mul(6).div(10).sub(userHasAward[msg.sender]);
        }
        if (amount == 4) {
            canWithdraw_amount = userTotalAward[msg.sender].mul(8).div(10).sub(userHasAward[msg.sender]);
        }
        if (amount > 4) {
            canWithdraw_amount = userTotalAward[msg.sender].sub(userHasAward[msg.sender]);
        }
        if(canWithdraw_amount > 0) {
            require(userTotalAward[msg.sender] >= userHasAward[msg.sender].add(canWithdraw_amount));
            userHasAward[msg.sender] = userHasAward[msg.sender].add(canWithdraw_amount);
            cir.transfer(msg.sender, canWithdraw_amount);
        }
    }

    function getInfo() external view returns(uint, uint, uint) {
        if (now < startTime) {
            return (userTotalAward[msg.sender], userHasAward[msg.sender], 0);
        }
        uint amount = now.sub(startTime).div(period).add(1);
        uint canWithdraw_amount = 0;
        if (amount == 1) {
            canWithdraw_amount = userTotalAward[msg.sender].div(10).sub(userHasAward[msg.sender]);
        }
        if (amount == 2) {
            canWithdraw_amount = userTotalAward[msg.sender].mul(3).div(10).sub(userHasAward[msg.sender]);
        }
        if (amount == 3) {
            canWithdraw_amount = userTotalAward[msg.sender].mul(6).div(10).sub(userHasAward[msg.sender]);
        }
        if (amount == 4) {
            canWithdraw_amount = userTotalAward[msg.sender].mul(8).div(10).sub(userHasAward[msg.sender]);
        }
        if (amount > 4) {
            canWithdraw_amount = userTotalAward[msg.sender].sub(userHasAward[msg.sender]);
        }
        return (userTotalAward[msg.sender], userHasAward[msg.sender], canWithdraw_amount);
    }

    function withdrawWrongAsset(address _token) external onlyOwner {
        IERC20(_token).transfer(owner(), IERC20(_token).balanceOf(address(this)));
        if (address(this).balance > 0) {
            (bool _success,) = owner().call.value(address(this).balance)("");
            require(_success, "Reverted TRX transfer");
        }
    }
}